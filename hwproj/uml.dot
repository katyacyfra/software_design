digraph activity_diagram {
  # Intermediary states
  start    [shape=point]
  login    [shape=diamond]
  register [shape=diamond]
  isAuth   [shape=diamond]
  auth     [shape=diamond]
  course   [shape=diamond]
  coursec  [shape=diamond]
  coursecm [shape=diamond]
  task     [shape=diamond]
  taskc    [shape=diamond]
  taskcm   [shape=diamond]

  # Terminal states
  help            [shape=doubleoctagon]
  loginSuccess    [shape=doubleoctagon]
  errorScreen     [shape=doubleoctagon]
  registerSuccess [shape=doubleoctagon]
  stats           [shape=doubleoctagon]
  emptyScreen     [shape=doubleoctagon]
  courses         [shape=doubleoctagon]
  tasks           [shape=doubleoctagon]
  comments        [shape=doubleoctagon]
  readStdin       [shape=doubleoctagon]
  taskStatement   [shape=doubleoctagon]

  # Transitions
  start    -> login[label="login"]
  start    -> register[label="register"]
  start    -> help[label="help"]
  start    -> isAuth[label="(other)"]
  login    -> errorScreen[label="failed"]
  login    -> loginSuccess[label="success"]
  register -> errorScreen[label="no"]
  register -> registerSuccess[label="yes"]
  isAuth   -> auth[label="yes"]
  isAuth   -> errorScreen[label="no"]
  auth     -> course[label="course"]
  auth     -> task[label="task"]
  course   -> courses[label="list"]
  course   -> coursec[label="(other)"]
  coursec  -> errorScreen[label="no"]
  coursec  -> coursecm[label="yes"]
  coursecm -> emptyScreen[label="enroll"]
  coursecm -> emptyScreen[label="leave"]
  coursecm -> stats[label="stats"]
  coursecm -> tasks[label="tasks"]
  coursecm -> comments[label="comments"]
  task     -> tasks[label="list"]
  task     -> taskc[label="(other)"]
  taskc    -> errorScreen[label="no"]
  taskc    -> taskcm[label="yes"]
  taskcm   -> taskStatement[label="get"]
  taskcm   -> readStdin[label="put"]
  taskcm   -> comments[label="comments"]
  taskcm   -> readStdin[label="comment"]

  # Labels
  login    [label="Login successful?"]
  register [label="Valid creds?"]
  isAuth   [label="Is key provided?"]
  auth     [label="What was the command?"]
  course   [label="Subcommand"]
  coursec  [label="Course exists?"]
  coursecm [label="Subcommand"]
  task     [label="Subcommand"]
  taskc    [label="Task exists?"]
  taskcm   [label="Subcommand"]
}
